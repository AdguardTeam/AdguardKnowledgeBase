---
title: 'Расширенные настройки'
taxonomy:
    category:
        - docs
visible: true
---

## Как получить доступ к Расширенным настройкам

> Изменение *Низкоуровневых настроек* может нарушить работу AdGuard, привести к разрыву интернет-соединения или поставить под угрозу ваши безопасность и конфиденциальность. Открывайте этот раздел, только если вы уверены в своих действиях или наша служба поддержки попросила вас об этом. 

Чтобы перейти к *Расширенным настройкам*, кликните иконку AdGuard в трее → иконку шестерёнки → Дополнительно → Расширенные настройки.

## Расширенные настройки

`network.extension.exclude.domains` 

Перечисленные домены будут исключены из фильтрации в режиме *Сетевого расширения*. Для разделения значений используйте запятую или перенос строки. 

`network.extension.exclude.ports`

Перечисленные порты будут исключены из фильтрации в режиме *Сетевого расширения*. Для разделения значений используйте запятую или перевод строки.

`network.extension.route.exclude` 

Перечисленные маршруты будут исключены из фильтрации в режиме *Сетевого расширения*. Используйте IP-адрес или значение CIDR, чтобы задать маршрут.
Разделяйте значения запятыми или переводом строки. 

`network.extension.http.downgrade.bundleids`

Здесь можно задать список приложений, для которых протокол HTTP/2 будет понижен до HTTP/1.1 в режиме фильтрации *Сетевое расширение*. Идентификаторы приложений (bundle ID) разделяются запятой или переводом строки.

`network.extension.monterey.force.split.tunnel` 

Здесь можно запретить AdGuard использовать маршрут по умолчанию, который включён в режиме *Сетевого расширения* на macOS Monterey. AdGuard использует маршрут по умолчанию, чтобы отключить *Частный узел iCloud* и *Защиту конфиденциальности в Почте*, т.к. не может работать с ними одновременно. 

Более подробную информацию о проблеме вы найдёте [в этой статье](https://kb.adguard.com/ru/macos/solving-problems/icloud-private-relay). 

`network.extension.dns.redirect.exclude.bundleids` 

Здесь можно указать список приложений, осуществляющих DNS-запросы напрямую, а не через DNS-резолвер. Для них в режиме Сетевого расширения DNS-фильтрация будет выключена. Например, некоторые VPN-клиенты или приложения DNS-фильтрации.  Идентификаторы приложений (bundle ID) следует разделять запятой или переводом строки.

`network.https.ocsp.check` 

Поставив значение `true`, вы включите проверку отзыва HTTPS-сертификатов.

`network.filtering.localnetwork` 

Поставив значение `true`, вы включите фильтрацию локальной сети. 

`network.filtering.localhost` 

Поставив значение `true`, вы включите фильтрацию loopback-соединений. 

`upstream.proxy` 

В данной строке можно указать прокси-сервер для исходящих соединений. 

`upstream.proxy.socks5udp` 

Поставив значение `true`, вы включите перенаправление UDP-трафика через локальный сервер в режиме SOCKS5. Обратите внимание: если ваш SOCKS5-сервер не поддерживает протокол UDP, включение данной настройки приведёт к обрыву интернет-соединения.

`dns.proxy.bootstrap.ips`

Сюда можно внести IP-адреса DNS-серверов, которые будут использоваться для определения адреса зашифрованного DNS-сервера.

`dns.proxy.fallback.ips`

Здесь можно указать список IP-адресов DNS-серверов, которые будут использоваться в качестве резервных в случае, есть зашифрованный DNS-сервер не будет отвечать. 

`dns.proxy.detect.search.domains`

Данная опция включает автоопределение домена локальной сети, который будет автоматически перенаправляться на резервный DNS-сервер вместо основного.  

`dns.proxy.fallback.domains`

Здесь можно перечислить домены, для которых будет использоваться резервный DNS-сервер вместо основного. 

`dns.proxy.adblockrules.blocking.mode`

Здесь вы можете указать тип ответа DNS-сервера на заблокированные запросы, соответствующие правилам в стиле блокировщика рекламы. 

0 — отвечать кодом REFUSED
1 — отвечать кодом NXDOMAIN
2 — отвечать 0.0.0.0 или адресами, указанными в dns.proxy.blocking.response.IPv4.address и/или dns.proxy.blocking.response.IPv6.address

`dns.proxy.hostrules.blocking.mode`

Здесь вы можете указать тип ответа DNS-сервера на заблокированные запросы, соответствующие правилам hosts:

0 — ответить кодом ответа REFUSED
1 — ответить кодом ответа NXDOMAIN
2 — ответить 0.0.0.0 или адресами, указанными в dns.proxy.blocking.response.IPv4.address и/или dns.proxy.blocking.response.IPv6.address

`dns.proxy.blocking.response.IPv4.address`

Здесь вы можете указать IPv4-адрес, который будет возвращаться в ответ на заблокированные "A" запросы, когда в dns.proxy.adblockrules.blocking.mode или в dns.proxy.hostrules.blocking.mode выбран тип ответа "ADDRESS".

`dns.proxy.blocking.response.IPv6.address`

Здесь вы можете указать IPv6-адрес, который будет возвращаться в ответ на заблокированные "AААА" запросы, когда в `dns.proxy.adblockrules.blocking.mode` или в `dns.proxy.hostrules.blocking.mode` выбран тип ответа "ADDRESS".

`dns.proxy.block.AAAA.requests`

Здесь вы можете активировать блокировку DNS-запросов IPv6.

`dns.proxy.blocked.response.TTL.in.seconds`

Здесь вы можете указать значение TTL (время жизни пакета данных в протоколе IP), которое будет возвращено в ответ на заблокированный запрос.  

`subscription.link.interception.userscript`

Активируйте эту функцию, если хотите, чтобы AdGuard автоматически перехватывал URL-адреса пользовательских скриптов и открывал диалоговое окно установки.

`subscription.link.interception.filter`

Активируйте эту функцию, если хотите, чтобы AdGuard автоматически перехватывал URL-адреса подписки (т.е. abp:subscribe и т.п.) и открывал диалоговое окно установки пользовательского фильтра.
