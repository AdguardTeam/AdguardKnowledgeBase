---
title: 'Как предотвратить возможные DNS-утечки'
taxonomy:
   category:
       - docs
visible: true
---
В AdGuard для Windows можно указать DNS-сервер, чтобы он обрабатывал запросы вместо системных DNS-адресов, которые предоставляются провайдером (если это не отменено в настройках системы). Замена DNS-сервера, настроенного по умолчанию, может защитить ваш DNS-трафик от прослушивания провайдером. Более того, выбрав зашифрованный и/или фильтрующий DNS-сервер, вы получите дополнительную защиту от киберпреступников и назойливой рекламы.

Многие продвинутые пользователи AdGuard для Windows активируют функцию DNS-защиты и проверяют надёжность соединения. Иногда проверка на таком сайте, как https://ipleak.net/, показывает, что запросы обрабатываются DNS-сервером по умолчанию, а не указанным в программе. В этой статье мы расскажем вам, почему это происходит и как этого избежать.

## Bootstrap DNS-адрес

Адреса DNS-серверов могут быть записаны как IP-адреса или как доменные имена. 
В случае с IP-адресами сложностей не возникает: AdGuard перенаправляет DNS-запрос непосредственно на сервер, указанный в модуле DNS-защиты. Однако адреса зашифрованных DNS-серверов, таких как DoT или DoH, чаще всего записываются как доменные имена. В этом случае, чтобы сначала разрешить адрес зашифрованного DNS-сервера, AdGuard отправляет DNS-запрос на bootstrap-адрес, который по умолчанию является системным DNS-сервером. Это соединение службы проверки воспринимают как утечку.

**Для устранения этой утечки:**

* перейдите в *Расширенные настройки* 
* прокрутите вниз до раздела *Список пользовательских bootstrap-адресов*
* введите bootsrap-адрес в формате IP-адреса (вы можете найти нужный в [списке известных DNS-провайдеров](https://adguard-dns.io/kb/general/dns-providers))
* нажмите *Сохранить*

## Резервный (fallback) DNS-сервер

Иногда AdGuard не может связаться с указанным сервером из-за плохого интернет-соединения, истечения времени ожидания ответа сервера, установленного по умолчанию, или других проблем, связанных с сервером. В этом случае он подключится к резервному серверу, который по умолчанию является системным DNS-сервером. Это соединение также будет рассматриваться службой проверки как утечка. 

**Чтобы устранить эту утечку:**

* перейдите в раздел *Расширенные настройки* 
* прокрутите вниз до раздела *Резервные (fallback) серверы*
* отметьте опцию *Использовать пользовательские серверы*
* затем найдите раздел *Список пользовательских резервных (fallback) серверов* и укажите сервера по одному в строке

или

* перейдите в *Расширенные настройки* 
* прокрутите вниз до раздела *Резервные (fallback) серверы*
* выберите *Не использовать резервные серверы*

или

* перейдите в *Расширенные настройки* 
* прокрутите вниз до раздела *Время ожидания ответа DNS-сервера*
* Введите произвольное большое число 
